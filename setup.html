<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ù†ØµØ©</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body id="setup">
  <main class="wrap setup-box">
    <h1 class="brand3d">ØªÙ‡ÙŠØ¦Ø© Ù…Ù†ØµØ© Ù‚Ø·Ø§Ø¹ Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ³Ø· Ø§Ù„Ø±ÙŠØ§Ø¶</h1>
    <p class="meta">Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© ØªØ¸Ù‡Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ù†ØµØ©.</p>
    <div class="card">
      <label class="lbl-small">Ø±Ø§Ø¨Ø· Google Apps Script (ÙŠØ¨Ø¯Ø£ Ø¨Ù€ googleusercontent)</label>
      <input id="suScript" class="inp" placeholder="https://script.googleusercontent.com/..." />

      <label class="lbl-small">ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</label>
      <input id="suPass" class="inp" placeholder="admin3838771" />

      <label class="lbl-small">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
      <input id="suPrimary" type="color" class="inp" value="#0044ff" />

      <div class="row">
        <button class="chip" onclick="previewSetup()">Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
        <button class="chip" onclick="saveSetup()">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      </div>
      <div class="meta small">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….</div>
    </div>
  </main>

  <!-- Ø³ÙƒØ±Ø¨Øª Ø¯Ø§Ø®Ù„ÙŠ Ù†Ø¸ÙŠÙ ÙŠØ¹Ø±Ù‘Ù Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆÙŠÙ…Ù†Ø¹ Ø£ÙŠ Ø£Ø®Ø·Ø§Ø¡ -->
  <script>
  'use strict';
  // ØªØ£ÙƒÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
  console.log('âœ… inline setup script loaded');

  // Ø²Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
  function previewSetup() {
    const color = (document.getElementById('suPrimary') || {}).value || '#0044ff';
    // ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ· ÙŠØ¤ÙƒØ¯ Ø§Ù„ØªØºÙŠÙŠØ±
    document.body.style.boxShadow = 'inset 0 0 0 6px ' + color + '55';
    alert('ğŸ¨ ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© â€“ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: ' + color);
  }

  // Ø²Ø± Ø§Ù„Ø­ÙØ¸
  function saveSetup() {
    const scriptURL = (document.getElementById('suScript') || {}).value.trim();
    const adminPass = (document.getElementById('suPass') || {}).value.trim();
    const primaryColor = (document.getElementById('suPrimary') || {}).value || '#0044ff';

    if (!scriptURL || !scriptURL.startsWith('https://script.googleusercontent.com/')) {
      alert('âš ï¸ ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙŠØ¨Ø¯Ø£ Ø¨Ù€ https://script.googleusercontent.com/');
      return;
    }
    if (!adminPass) {
      alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…');
      return;
    }

    try {
      localStorage.setItem('scriptURL', scriptURL);
      localStorage.setItem('adminPass', adminPass);
      localStorage.setItem('primaryColor', primaryColor);
      console.log('ğŸ’¾ saved:', { scriptURL, adminPass, primaryColor });
      alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.');
    } catch (e) {
      console.error('localStorage error:', e);
      alert('âŒ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (localStorage). Ø¬Ø±Ù‘Ø¨ Ù…Ù† Ù…ØªØµÙØ­ Ø¢Ø®Ø±.');
    }
  }

  // Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„: Ø·Ø¨Ù‘Ù‚ Ø§Ù„Ù„ÙˆÙ† Ù„Ùˆ ÙƒØ§Ù† Ù…Ø­ÙÙˆØ¸
  (function applySavedTheme(){
    try {
      const color = localStorage.getItem('primaryColor');
      if (color) {
        document.documentElement.style.setProperty('--primary', color);
      }
    } catch (_) {}
  })();
  </script>
</body>
</html>
